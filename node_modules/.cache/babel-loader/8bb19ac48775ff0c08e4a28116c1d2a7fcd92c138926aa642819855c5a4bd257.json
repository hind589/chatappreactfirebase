{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hinde\\\\Desktop\\\\ahlam\\\\project-hind-soufiane\\\\newChat\\\\chathindchat\\\\src\\\\friend\\\\Friend.js\";\nimport React, { useContext, useState } from 'react';\nimport { onValue, push, ref, set } from 'firebase/database';\nimport { click } from '@testing-library/user-event/dist/click';\nimport { db } from '../firebase/Firebase';\nimport { ThemeContext } from '../themeContext/ThemeContext';\nimport './Style.css';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Friend() {\n  var _s = $RefreshSig$();\n  const ThemeContext = createContext();\n  const ThemeProvider = ({\n    children\n  }) => {\n    _s();\n    const navigate = useNavigate();\n    const [chatid, setuchatid] = useState([]);\n    const {\n      amiss,\n      nomchat,\n      prenomchat,\n      idchat,\n      imagechat,\n      userid,\n      usernom,\n      userprenom,\n      users,\n      photo\n    } = useContext(ThemeContext);\n    const conversation = obj => {\n      nomchat(obj.nom);\n      imagechat(obj.photo);\n      idchat(obj.id);\n      setuchatid(obj.id);\n      prenomchat(obj.prenom);\n      const user = localStorage.getItem('userid');\n      var tabinvity = [];\n      var tabinvityo = [];\n      var exist = false;\n      var conversamis = users.map(itemy => {\n        var conversamisss = itemy.discussion.map((itemyy, key) => {\n          if (key > 0) {\n            if (itemy.id == user && itemyy.avecqui.id == obj.id) {\n              exist = true;\n            }\n          }\n        });\n        if (itemy.id == user && exist == false) {\n          return {\n            ...itemy,\n            discussion: [...itemy.discussion, {\n              avecqui: obj,\n              msg: [{\n                contenu: '',\n                parqui: user\n              }]\n            }]\n          };\n        }\n        return itemy;\n      });\n      const dataRefamis = ref(db, 'users');\n      set(dataRefamis, conversamis);\n      var exist2 = false;\n      var conversamisso = conversamis.map(itemo => {\n        var conversamisssos = itemo.discussion.map((itemyy, key) => {\n          if (key > 0) {\n            if (itemo.id == obj.id && itemyy.avecqui.id == user) {\n              exist2 = true;\n            }\n          }\n        });\n        if (itemo.id == obj.id && exist2 == false) {\n          return {\n            ...itemo,\n            discussion: [...itemo.discussion, {\n              avecqui: {\n                id: user,\n                nom: usernom,\n                prenom: userprenom,\n                photo: photo\n              },\n              msg: [{\n                contenu: \"\",\n                parqui: user\n              }]\n            }]\n          };\n        }\n        return itemo;\n      });\n      const dataRefamiss = ref(db, 'users');\n      set(dataRefamiss, conversamisso);\n      navigate(\"/conversations\");\n      return /*#__PURE__*/_jsxDEV(ThemeContext.Provider, {\n        value: {\n          userid,\n          usernom,\n          userprenom,\n          users,\n          photo,\n          sendrequest,\n          confirm,\n          listinvit,\n          ivitcount,\n          amiss,\n          ignorer,\n          supprimeyy,\n          nomchat,\n          prenomchat,\n          imagechat,\n          idchat,\n          imagechat,\n          chatavecprenom,\n          imagewith\n        },\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this);\n    };\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"App\",\n        children: amiss.map((x, key) => key > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"card bg-dark text-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: x.photo,\n              alt: `${x.prenom} ${x.nom}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: [x.prenom, \" \", x.nom]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"btn btn-success\",\n              onClick: () => {\n                conversation(x);\n              },\n              children: \"Lancez la conversation\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 105,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 15\n          }, this)]\n        }, key, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 7\n      }, this)\n    }, void 0, false);\n  };\n  _s(ThemeProvider, \"ESGhjgDkf9V52nMMfwMvoPziigA=\", false, function () {\n    return [useNavigate];\n  });\n}\n_c = Friend;\nexport default Friend;\nvar _c;\n$RefreshReg$(_c, \"Friend\");","map":{"version":3,"names":["React","useContext","useState","onValue","push","ref","set","click","db","ThemeContext","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","Friend","_s","$RefreshSig$","createContext","ThemeProvider","children","navigate","chatid","setuchatid","amiss","nomchat","prenomchat","idchat","imagechat","userid","usernom","userprenom","users","photo","conversation","obj","nom","id","prenom","user","localStorage","getItem","tabinvity","tabinvityo","exist","conversamis","map","itemy","conversamisss","discussion","itemyy","key","avecqui","msg","contenu","parqui","dataRefamis","exist2","conversamisso","itemo","conversamisssos","dataRefamiss","Provider","value","sendrequest","confirm","listinvit","ivitcount","ignorer","supprimeyy","chatavecprenom","imagewith","fileName","_jsxFileName","lineNumber","columnNumber","className","x","src","alt","type","onClick","_c","$RefreshReg$"],"sources":["C:/Users/hinde/Desktop/ahlam/project-hind-soufiane/newChat/chathindchat/src/friend/Friend.js"],"sourcesContent":["import React, { useContext,useState } from 'react';\r\nimport { onValue, push, ref, set } from 'firebase/database';\r\nimport { click } from '@testing-library/user-event/dist/click';\r\nimport { db } from '../firebase/Firebase';\r\n\r\nimport { ThemeContext } from '../themeContext/ThemeContext';\r\nimport './Style.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Friend() {\r\n  const ThemeContext = createContext();\r\nconst ThemeProvider = ({ children }) => {\r\n  const navigate = useNavigate();\r\n  const [chatid,setuchatid]=useState([]);\r\n  const { amiss,nomchat,prenomchat,idchat,imagechat,userid, usernom,userprenom,users ,photo } = useContext(ThemeContext);\r\n  const  conversation=(obj)=>{\r\n    nomchat(obj.nom)\r\n    imagechat(obj.photo)\r\n    idchat(obj.id)\r\n    setuchatid(obj.id);\r\n        prenomchat(obj.prenom)\r\n  const user = localStorage.getItem('userid');\r\n \r\n  var tabinvity=[]\r\n  var tabinvityo=[]\r\n  var exist=false;\r\n  var conversamis =users.map((itemy) => {\r\n    \r\n    \r\n  var conversamisss =itemy.discussion.map((itemyy,key) => {\r\n    if(key>0){\r\n    if( itemy.id==user && itemyy.avecqui.id ==obj.id    ){\r\n     exist=true\r\n    }\r\n  }\r\n  })\r\n\r\n  if (itemy.id == user && exist==false ) {\r\n        return { ...itemy, discussion:[...itemy.discussion,{avecqui:obj,msg:[{contenu:'',parqui:user}]}]};\r\n                       }\r\n        return itemy; \r\n                \r\n        \r\n      });\r\n\r\n\r\n    const dataRefamis = ref(db, 'users'); \r\n\r\n    set(dataRefamis,conversamis); \r\n\r\nvar exist2=false;\r\n\r\n    var conversamisso =conversamis.map((itemo) => {\r\n\r\n      var conversamisssos =itemo.discussion.map((itemyy,key) => {\r\n        if(key>0){\r\n        if( itemo.id==obj.id && itemyy.avecqui.id ==user   ){\r\n         exist2=true;\r\n          \r\n        }\r\n      }\r\n      })\r\n      \r\n\r\n    \r\n      if (itemo.id == obj.id && exist2==false ) {\r\n       \r\n    \r\n          return { ...itemo, discussion:[...itemo.discussion,{avecqui:{id:user,nom:usernom,prenom:userprenom,photo: photo},msg:[{contenu:\"\",parqui:user}]}]};\r\n                         }\r\n    \r\n                  \r\n    \r\n          return itemo; \r\n                  \r\n        });\r\n      \r\n        \r\n      const dataRefamiss = ref(db, 'users'); \r\n  \r\n      set(dataRefamiss,conversamisso); \r\n      navigate(\"/conversations\")\r\n\r\n      return (\r\n      \r\n      \r\n        <ThemeContext.Provider value={{ userid, usernom,userprenom,users ,photo,sendrequest,confirm,listinvit,ivitcount,amiss,ignorer,supprimeyy,nomchat,prenomchat,imagechat,idchat,imagechat,chatavecprenom,imagewith}}>\r\n          {children}\r\n        </ThemeContext.Provider>\r\n         \r\n      );\r\n  }\r\n\r\n  return (\r\n    <>\r\n      <div className=\"App\">\r\n        {amiss.map((x, key) => (\r\n          key > 0 && (\r\n            <div className=\"card bg-dark text-white\" key={key}>\r\n              <div>\r\n                <img src={x.photo} alt={`${x.prenom} ${x.nom}`} />\r\n              </div>\r\n              <div>\r\n                <h1>{x.prenom} {x.nom}</h1>\r\n                <button type=\"button\" className=\"btn btn-success\" onClick={()=>{conversation(x)}}>Lancez la conversation</button>\r\n              </div>\r\n            </div>\r\n          )\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n}\r\nexport default Friend;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}