{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\HP\\\\Downloads\\\\Telegram Desktop\\\\newCha1t\\\\newChat\\\\newChat\\\\chathindchat\\\\src\\\\friend\\\\Friend.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useState } from 'react';\nimport { onValue, push, query, ref, set } from 'firebase/database';\nimport { click } from '@testing-library/user-event/dist/click';\nimport { db } from '../firebase/Firebase';\nimport { ThemeContext } from '../themeContext/ThemeContext';\nimport './Style.css';\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction Friend() {\n  _s();\n  const navigate = useNavigate();\n  const [chatid, setchatid] = useState([]);\n  const {\n    amiss,\n    nomchat,\n    prenomchat,\n    idchat,\n    imagechat,\n    userid,\n    usernom,\n    userprenom,\n    users,\n    photo,\n    idwith,\n    getdata\n  } = useContext(ThemeContext);\n  const conversation = async obj => {\n    nomchat(obj.nom);\n    imagechat(obj.photo);\n    idchat(obj.id);\n    var arrayi = [];\n    alert(\"hada alert idwith\" + obj.id);\n    setchatid(obj.id, () => {\n      alert(chatid);\n    });\n    const query = ref(db, `users`);\n    return await onValue(query, snapshot => {\n      const data = snapshot.val();\n      console.log(data);\n      var tabinvit = [];\n      var tabamis = [];\n      Object.values(data).map(x => {\n        arrayi.push(x);\n      });\n      console.log(arrayi);\n      console.log(users);\n      prenomchat(obj.prenom);\n      const user = localStorage.getItem('userid');\n      var tabinvity = [];\n      var tabinvityo = [];\n      var exist = false;\n      var conversamis = users.map(itemy => {\n        var conversamisss = itemy.discussion.map((itemyy, key) => {\n          if (key > 0) {\n            if (itemy.id == user && itemyy.avecqui.id == obj.id) {\n              exist = true;\n            }\n          }\n        });\n        if (itemy.id == user && exist == false) {\n          return {\n            ...itemy,\n            discussion: [...itemy.discussion, {\n              avecqui: obj,\n              msg: [{\n                contenu: '',\n                parqui: user\n              }]\n            }]\n          };\n        }\n        return itemy;\n      });\n      const dataRefamis = ref(db, 'users');\n      set(dataRefamis, conversamis);\n      var exist2 = false;\n      var conversamisso = conversamis.map(itemo => {\n        var conversamisssos = itemo.discussion.map((itemyy, key) => {\n          if (key > 0) {\n            if (itemo.id == obj.id && itemyy.avecqui.id == user) {\n              exist2 = true;\n            }\n          }\n        });\n        if (itemo.id == obj.id && exist2 == false) {\n          return {\n            ...itemo,\n            discussion: [...itemo.discussion, {\n              avecqui: {\n                id: user,\n                nom: usernom,\n                prenom: userprenom,\n                photo: photo\n              },\n              msg: [{\n                contenu: \"\",\n                parqui: user\n              }]\n            }]\n          };\n        }\n        return itemo;\n      });\n      const dataRefamiss = ref(db, 'users');\n      set(dataRefamiss, conversamisso);\n      navigate(\"/conversations\");\n    });\n  };\n  useEffect(() => {\n    getdata();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: amiss.map((x, key) => key > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"card bg-dark text-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: x.photo,\n            alt: `${x.prenom} ${x.nom}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [x.prenom, \" \", x.nom]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn btn-success\",\n            onClick: () => {\n              conversation(x);\n            },\n            children: \"Lancez la conversation\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 15\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 13\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n}\n_s(Friend, \"+ed2qx2xxqpmfDObckYlhYn1dzE=\", false, function () {\n  return [useNavigate];\n});\n_c = Friend;\nexport default Friend;\nvar _c;\n$RefreshReg$(_c, \"Friend\");","map":{"version":3,"names":["React","useContext","useEffect","useState","onValue","push","query","ref","set","click","db","ThemeContext","useNavigate","jsxDEV","_jsxDEV","Fragment","_Fragment","Friend","_s","navigate","chatid","setchatid","amiss","nomchat","prenomchat","idchat","imagechat","userid","usernom","userprenom","users","photo","idwith","getdata","conversation","obj","nom","id","arrayi","alert","snapshot","data","val","console","log","tabinvit","tabamis","Object","values","map","x","prenom","user","localStorage","getItem","tabinvity","tabinvityo","exist","conversamis","itemy","conversamisss","discussion","itemyy","key","avecqui","msg","contenu","parqui","dataRefamis","exist2","conversamisso","itemo","conversamisssos","dataRefamiss","children","className","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","type","onClick","_c","$RefreshReg$"],"sources":["C:/Users/HP/Downloads/Telegram Desktop/newCha1t/newChat/newChat/chathindchat/src/friend/Friend.js"],"sourcesContent":["import React, { useContext,useEffect,useState } from 'react';\r\nimport { onValue, push, query, ref, set } from 'firebase/database';\r\nimport { click } from '@testing-library/user-event/dist/click';\r\nimport { db } from '../firebase/Firebase';\r\n\r\nimport { ThemeContext } from '../themeContext/ThemeContext';\r\nimport './Style.css';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nfunction Friend() {\r\n  const navigate = useNavigate();\r\n  const [chatid,setchatid]=useState([]);\r\n  const { amiss,nomchat,prenomchat,idchat,imagechat,userid, usernom,userprenom,users ,photo,idwith,getdata } = useContext(ThemeContext);\r\n  const  conversation=async(obj)=>{\r\n    nomchat(obj.nom)\r\n    imagechat(obj.photo)\r\n    idchat(obj.id)\r\n  var arrayi=[]\r\n    alert(\"hada alert idwith\"+obj.id)\r\n     \r\n    setchatid(obj.id, () => {\r\n       \r\n      alert(chatid); \r\n    });\r\n    const query = ref(db, `users`);\r\n    return await onValue(query, (snapshot) => {\r\n     \r\n      const data = snapshot.val();\r\n      console.log(data)\r\n      var tabinvit=[]\r\n      var tabamis=[]\r\n      Object.values(data).map((x)=>{\r\n        arrayi.push(x)\r\n      })\r\n    \r\n    console.log(arrayi)\r\n    \r\n \r\n\r\n\r\n\r\n\r\n    console.log(users)\r\n        prenomchat(obj.prenom)\r\n  const user = localStorage.getItem('userid');\r\n \r\n  var tabinvity=[]\r\n  var tabinvityo=[]\r\n  var exist=false;\r\n\r\n\r\n\r\nvar conversamis =users.map((itemy) => {\r\n    \r\n    \r\n  var conversamisss =itemy.discussion.map((itemyy,key) => {\r\n    if(key>0){\r\n    if( itemy.id==user && itemyy.avecqui.id ==obj.id    ){\r\n     exist=true\r\n    }\r\n  }\r\n  })\r\n\r\n  if (itemy.id == user && exist==false ) {\r\n        return { ...itemy, discussion:[...itemy.discussion,{avecqui:obj,msg:[{contenu:'',parqui:user}]}]};\r\n                       }\r\n        return itemy; \r\n                \r\n        \r\n      });\r\n\r\n\r\n    const dataRefamis = ref(db, 'users'); \r\n\r\n    set(dataRefamis,conversamis); \r\n\r\nvar exist2=false;\r\n\r\n    var conversamisso =conversamis.map((itemo) => {\r\n\r\n      var conversamisssos =itemo.discussion.map((itemyy,key) => {\r\n        if(key>0){\r\n        if( itemo.id==obj.id && itemyy.avecqui.id ==user   ){\r\n         exist2=true;\r\n          \r\n        }\r\n      }\r\n      })\r\n      \r\n\r\n    \r\n      if (itemo.id == obj.id && exist2==false ) {\r\n       \r\n    \r\n          return { ...itemo, discussion:[...itemo.discussion,{avecqui:{id:user,nom:usernom,prenom:userprenom,photo: photo},msg:[{contenu:\"\",parqui:user}]}]};\r\n                         }\r\n    \r\n                  \r\n    \r\n          return itemo; \r\n                  \r\n        });\r\n      \r\n        \r\n      const dataRefamiss = ref(db, 'users'); \r\n  \r\n      set(dataRefamiss,conversamisso); \r\n      navigate(\"/conversations\")\r\n\r\n})\r\n    \r\n  }\r\n  useEffect(()=>{\r\ngetdata()\r\n  },[])\r\n\r\n  return (\r\n    <>\r\n      <div className=\"App\">\r\n        {amiss.map((x, key) => (\r\n          key > 0 && (\r\n            <div className=\"card bg-dark text-white\" key={key}>\r\n              <div>\r\n                <img src={x.photo} alt={`${x.prenom} ${x.nom}`} />\r\n              </div>\r\n              <div>\r\n                <h1>{x.prenom} {x.nom}</h1>\r\n                <button type=\"button\" className=\"btn btn-success\" onClick={()=>{conversation(x)}}>Lancez la conversation</button>\r\n              </div>\r\n            </div>\r\n          )\r\n        ))}\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default Friend;\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAACC,SAAS,EAACC,QAAQ,QAAQ,OAAO;AAC5D,SAASC,OAAO,EAAEC,IAAI,EAAEC,KAAK,EAAEC,GAAG,EAAEC,GAAG,QAAQ,mBAAmB;AAClE,SAASC,KAAK,QAAQ,wCAAwC;AAC9D,SAASC,EAAE,QAAQ,sBAAsB;AAEzC,SAASC,YAAY,QAAQ,8BAA8B;AAC3D,OAAO,aAAa;AACpB,SAASC,WAAW,QAAQ,kBAAkB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAE/C,SAASC,MAAMA,CAAA,EAAG;EAAAC,EAAA;EAChB,MAAMC,QAAQ,GAAGP,WAAW,CAAC,CAAC;EAC9B,MAAM,CAACQ,MAAM,EAACC,SAAS,CAAC,GAAClB,QAAQ,CAAC,EAAE,CAAC;EACrC,MAAM;IAAEmB,KAAK;IAACC,OAAO;IAACC,UAAU;IAACC,MAAM;IAACC,SAAS;IAACC,MAAM;IAAEC,OAAO;IAACC,UAAU;IAACC,KAAK;IAAEC,KAAK;IAACC,MAAM;IAACC;EAAQ,CAAC,GAAGhC,UAAU,CAACU,YAAY,CAAC;EACrI,MAAOuB,YAAY,GAAC,MAAMC,GAAG,IAAG;IAC9BZ,OAAO,CAACY,GAAG,CAACC,GAAG,CAAC;IAChBV,SAAS,CAACS,GAAG,CAACJ,KAAK,CAAC;IACpBN,MAAM,CAACU,GAAG,CAACE,EAAE,CAAC;IAChB,IAAIC,MAAM,GAAC,EAAE;IACXC,KAAK,CAAC,mBAAmB,GAACJ,GAAG,CAACE,EAAE,CAAC;IAEjChB,SAAS,CAACc,GAAG,CAACE,EAAE,EAAE,MAAM;MAEtBE,KAAK,CAACnB,MAAM,CAAC;IACf,CAAC,CAAC;IACF,MAAMd,KAAK,GAAGC,GAAG,CAACG,EAAE,EAAG,OAAM,CAAC;IAC9B,OAAO,MAAMN,OAAO,CAACE,KAAK,EAAGkC,QAAQ,IAAK;MAExC,MAAMC,IAAI,GAAGD,QAAQ,CAACE,GAAG,CAAC,CAAC;MAC3BC,OAAO,CAACC,GAAG,CAACH,IAAI,CAAC;MACjB,IAAII,QAAQ,GAAC,EAAE;MACf,IAAIC,OAAO,GAAC,EAAE;MACdC,MAAM,CAACC,MAAM,CAACP,IAAI,CAAC,CAACQ,GAAG,CAAEC,CAAC,IAAG;QAC3BZ,MAAM,CAACjC,IAAI,CAAC6C,CAAC,CAAC;MAChB,CAAC,CAAC;MAEJP,OAAO,CAACC,GAAG,CAACN,MAAM,CAAC;MAOnBK,OAAO,CAACC,GAAG,CAACd,KAAK,CAAC;MACdN,UAAU,CAACW,GAAG,CAACgB,MAAM,CAAC;MAC5B,MAAMC,IAAI,GAAGC,YAAY,CAACC,OAAO,CAAC,QAAQ,CAAC;MAE3C,IAAIC,SAAS,GAAC,EAAE;MAChB,IAAIC,UAAU,GAAC,EAAE;MACjB,IAAIC,KAAK,GAAC,KAAK;MAIjB,IAAIC,WAAW,GAAE5B,KAAK,CAACmB,GAAG,CAAEU,KAAK,IAAK;QAGpC,IAAIC,aAAa,GAAED,KAAK,CAACE,UAAU,CAACZ,GAAG,CAAC,CAACa,MAAM,EAACC,GAAG,KAAK;UACtD,IAAGA,GAAG,GAAC,CAAC,EAAC;YACT,IAAIJ,KAAK,CAACtB,EAAE,IAAEe,IAAI,IAAIU,MAAM,CAACE,OAAO,CAAC3B,EAAE,IAAGF,GAAG,CAACE,EAAE,EAAK;cACpDoB,KAAK,GAAC,IAAI;YACX;UACF;QACA,CAAC,CAAC;QAEF,IAAIE,KAAK,CAACtB,EAAE,IAAIe,IAAI,IAAIK,KAAK,IAAE,KAAK,EAAG;UACjC,OAAO;YAAE,GAAGE,KAAK;YAAEE,UAAU,EAAC,CAAC,GAAGF,KAAK,CAACE,UAAU,EAAC;cAACG,OAAO,EAAC7B,GAAG;cAAC8B,GAAG,EAAC,CAAC;gBAACC,OAAO,EAAC,EAAE;gBAACC,MAAM,EAACf;cAAI,CAAC;YAAC,CAAC;UAAC,CAAC;QAClF;QACf,OAAOO,KAAK;MAGd,CAAC,CAAC;MAGJ,MAAMS,WAAW,GAAG7D,GAAG,CAACG,EAAE,EAAE,OAAO,CAAC;MAEpCF,GAAG,CAAC4D,WAAW,EAACV,WAAW,CAAC;MAEhC,IAAIW,MAAM,GAAC,KAAK;MAEZ,IAAIC,aAAa,GAAEZ,WAAW,CAACT,GAAG,CAAEsB,KAAK,IAAK;QAE5C,IAAIC,eAAe,GAAED,KAAK,CAACV,UAAU,CAACZ,GAAG,CAAC,CAACa,MAAM,EAACC,GAAG,KAAK;UACxD,IAAGA,GAAG,GAAC,CAAC,EAAC;YACT,IAAIQ,KAAK,CAAClC,EAAE,IAAEF,GAAG,CAACE,EAAE,IAAIyB,MAAM,CAACE,OAAO,CAAC3B,EAAE,IAAGe,IAAI,EAAI;cACnDiB,MAAM,GAAC,IAAI;YAEZ;UACF;QACA,CAAC,CAAC;QAIF,IAAIE,KAAK,CAAClC,EAAE,IAAIF,GAAG,CAACE,EAAE,IAAIgC,MAAM,IAAE,KAAK,EAAG;UAGtC,OAAO;YAAE,GAAGE,KAAK;YAAEV,UAAU,EAAC,CAAC,GAAGU,KAAK,CAACV,UAAU,EAAC;cAACG,OAAO,EAAC;gBAAC3B,EAAE,EAACe,IAAI;gBAAChB,GAAG,EAACR,OAAO;gBAACuB,MAAM,EAACtB,UAAU;gBAACE,KAAK,EAAEA;cAAK,CAAC;cAACkC,GAAG,EAAC,CAAC;gBAACC,OAAO,EAAC,EAAE;gBAACC,MAAM,EAACf;cAAI,CAAC;YAAC,CAAC;UAAC,CAAC;QACnI;QAIf,OAAOmB,KAAK;MAEd,CAAC,CAAC;MAGJ,MAAME,YAAY,GAAGlE,GAAG,CAACG,EAAE,EAAE,OAAO,CAAC;MAErCF,GAAG,CAACiE,YAAY,EAACH,aAAa,CAAC;MAC/BnD,QAAQ,CAAC,gBAAgB,CAAC;IAEhC,CAAC,CAAC;EAEA,CAAC;EACDjB,SAAS,CAAC,MAAI;IAChB+B,OAAO,CAAC,CAAC;EACP,CAAC,EAAC,EAAE,CAAC;EAEL,oBACEnB,OAAA,CAAAE,SAAA;IAAA0D,QAAA,eACE5D,OAAA;MAAK6D,SAAS,EAAC,KAAK;MAAAD,QAAA,EACjBpD,KAAK,CAAC2B,GAAG,CAAC,CAACC,CAAC,EAAEa,GAAG,KAChBA,GAAG,GAAG,CAAC,iBACLjD,OAAA;QAAK6D,SAAS,EAAC,yBAAyB;QAAAD,QAAA,gBACtC5D,OAAA;UAAA4D,QAAA,eACE5D,OAAA;YAAK8D,GAAG,EAAE1B,CAAC,CAACnB,KAAM;YAAC8C,GAAG,EAAG,GAAE3B,CAAC,CAACC,MAAO,IAAGD,CAAC,CAACd,GAAI;UAAE;YAAA0C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/C,CAAC,eACNnE,OAAA;UAAA4D,QAAA,gBACE5D,OAAA;YAAA4D,QAAA,GAAKxB,CAAC,CAACC,MAAM,EAAC,GAAC,EAACD,CAAC,CAACd,GAAG;UAAA;YAAA0C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAK,CAAC,eAC3BnE,OAAA;YAAQoE,IAAI,EAAC,QAAQ;YAACP,SAAS,EAAC,iBAAiB;YAACQ,OAAO,EAAEA,CAAA,KAAI;cAACjD,YAAY,CAACgB,CAAC,CAAC;YAAA,CAAE;YAAAwB,QAAA,EAAC;UAAsB;YAAAI,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC9G,CAAC;MAAA,GAPsClB,GAAG;QAAAe,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAQ5C,CAER;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACC;EAAC,gBACN,CAAC;AAEP;AAAC/D,EAAA,CA9HQD,MAAM;EAAA,QACIL,WAAW;AAAA;AAAAwE,EAAA,GADrBnE,MAAM;AAgIf,eAAeA,MAAM;AAAC,IAAAmE,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}